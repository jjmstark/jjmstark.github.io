{{- define "main" }}

{{- if (and site.Params.profileMode.enabled .IsHome) }}
{{- partial "index_profile.html" . }}
{{- else }} {{/* if not profileMode */}}

{{- $pages := union .RegularPages .Sections }}
{{- $pages = where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- $pages = where $pages "Params.hiddenInHomeList" "!=" "true"  }}
{{- $paginator := .Paginate $pages }}

<div class="homepage-logo">
  <a href="{{ "" | absLangURL }}" title="{{ site.Title }}">
    <img src="{{ "target.png" | absURL }}" alt="{{ site.Title }}" height="60">
  </a>
</div>

{{- if and site.Params.homeInfoParams (eq $paginator.PageNumber 1) }}
{{- partial "home_info.html" . }}
{{- end }}

{{- if gt (len $paginator.Pages) 0 }}
<div class="simple-post-list">
  {{- range $paginator.Pages }}
  <div class="post-line">
    <span class="post-date">{{ .Date | time.Format "2006-01-02" }}</span>
    <a href="{{ .Permalink }}" class="post-title">{{ .Title }}</a>
  </div>
  {{- end }}
</div>
{{- end }}

{{- if gt $paginator.TotalPages 1 }}
<footer class="page-footer">
  <nav class="pagination">
    {{- if $paginator.HasPrev }}
    <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">
      <span aria-hidden="true">&laquo;&nbsp;{{ i18n "prev_page" | default "Prev" }}</span>
      <span class="sr-only">{{ i18n "prev_page" | default "Previous page" }}</span>
    </a>
    {{- end }}
    {{- if $paginator.HasNext }}
    <a class="next" href="{{ $paginator.Next.URL | absURL }}">
      <span aria-hidden="true">{{ i18n "next_page" | default "Next" }}&nbsp;&raquo;</span>
      <span class="sr-only">{{ i18n "next_page" | default "Next page" }}</span>
    </a>
    {{- end }}
  </nav>
</footer>
{{- end }}

{{- end }}{{/* end profileMode */}}

{{- end }}{{/* end main */}}